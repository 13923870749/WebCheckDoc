# 文档文字错误与逻辑问题检查系统

---

## 一、需求分析

### 1.1 项目目标
开发一套本地部署、面向信息化技术文档（如方案、检查报告等）的中文文档自动审核系统，支持文字错误和逻辑一致性检查，结合自定义知识库和大模型能力，生成PDF审核报告。系统操作简便，适合小规模本地使用，无需复杂权限管理。

### 1.2 主要功能

#### 1.2.1 文档上传与解析
- 支持 docx、doc、pdf 格式的中文文档上传
- 支持批量上传，自动区分主文档（审核报告）与过程文档
- 本地解析文档内容，提取文本、段落、章节等结构信息

#### 1.2.2 文字错误检查
- 检查拼写、错别字、语法、标点、用词不当
- 行业术语规范性校验（结合知识库）

#### 1.2.3 逻辑问题检查
- 跨章节、跨文档的逻辑一致性（如时间顺序、事件描述、结论与过程吻合等）
- 信息前后矛盾、遗漏、重复
- 结构完整性（如必备章节）

#### 1.2.4 多文档一致性审核
- 主文档（审核报告）与过程文档之间的时间线、事件、数据、结论等逻辑一致性自动对比
- 检查报告中引用的数据、结论是否与过程文档吻合

#### 1.2.5 知识库管理
- 支持 docx、excel 上传知识库
- 支持Web界面markdown编辑知识库
- 支持多个知识库，用户可选择
- 仅管理员可管理知识库（简单密码保护）

#### 1.2.6 审核报告生成
- 生成详细PDF报告，包含问题类型、位置、原文片段、修改建议
- 支持单文档和批量汇总报告

#### 1.2.7 Chat对话框
- 用户可通过chat对话框提出额外审核要求或补充说明

#### 1.2.8 用户与权限
- 普通用户：无需登录，直接访问页面使用
- 管理员：通过特定URL和密码进入知识库管理后台

#### 1.2.9 部署与安全
- 本地Linux环境部署
- 所有数据、文档、知识库均本地存储，保障隐私

---

## 二、技术选型

| 模块         | 技术/库         | 说明                                   |
|--------------|-----------------|----------------------------------------|
| 后端         | Flask           | 轻量级，易于集成模板和API              |
| 前端         | Jinja2 + Bootstrap | 简洁美观，易于快速开发                |
| 文档解析     | python-docx, pdfplumber, pandas | 支持docx、pdf、excel解析         |
| 知识库存储   | 本地文件/SQLite | 支持多格式，便于管理                   |
| 大模型调用   | DeepSeek本地API | 支持本地推理，或可扩展在线API          |
| PDF报告生成  | WeasyPrint/ReportLab | 生成高质量PDF报告                  |
| Chat对话框   | Flask-SocketIO/简单轮询 | 实现前后端消息交互                |
| 权限管理     | Flask-Login/自定义 | 仅管理员后台加密码保护               |
| 部署         | Python3/Linux/Docker | 支持一键部署，兼容主流Linux         |

---

## 三、项目结构建议

```
CheckDoc/
├── app.py                # Flask主程序入口
├── requirements.txt      # 依赖库
├── static/               # 静态资源（CSS/JS/图片）
├── templates/            # Jinja2模板（前端页面）
│   ├── index.html        # 普通用户界面
│   ├── admin.html        # 管理员后台
│   └── chat.html         # Chat对话框
├── uploads/              # 用户上传文档存储
├── knowledge_base/       # 知识库文件存储
├── reports/              # 审核报告PDF存储
├── utils/                # 工具函数（文档解析、知识库处理等）
│   ├── doc_parser.py
│   ├── pdf_parser.py
│   ├── knowledge.py
│   └── model_api.py
├── config.py             # 配置文件（如管理员密码、模型路径等）
└── README.md             # 项目说明
```

---

## 四、开发计划

### 阶段一：基础功能开发（2周）
1. 项目初始化，环境搭建
2. 实现文档上传、解析（docx、pdf、excel）
3. 实现知识库上传、markdown编辑、选择
4. 实现基础的文字错误检查（拼写、语法、术语）

### 阶段二：逻辑审核与大模型集成（2周）
1. 集成本地大模型（DeepSeek）API
2. 实现逻辑一致性检查（跨章节、跨文档）
3. 实现多文档审核主文档与过程文档的逻辑对比
4. 支持chat对话框与大模型交互

### 阶段三：报告生成与界面优化（1周）
1. 实现PDF报告生成与下载
2. 优化前端界面（Bootstrap美化、交互优化）
3. 管理员后台加密码保护

### 阶段四：测试与部署（1周）
1. 全面功能测试（单元、集成、用户体验）
2. 编写部署文档，支持一键启动或Docker部署
3. 项目文档完善

---

## 五、后续可扩展方向（可选）

- 支持更多文档格式（如markdown、txt）
- 支持多语言审核
- 审核报告模板自定义
- 更细粒度的权限管理
- 审核历史与统计分析

---

## 六、总结

本系统定位为本地小规模、轻量级、易用的中文技术文档审核工具，兼顾文字与逻辑审核，结合自定义知识库和大模型能力，适合信息化领域文档的高效自查与质量提升。  
如有新需求或细节调整，可随时补充！
